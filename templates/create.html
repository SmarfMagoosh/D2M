{% extends "base.html" %}

{% block title %} 
    Create 
{% endblock %}

{% block head %}
    <!--JQuery and JQuery UI-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css"/>

    <!--Modal libraries-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    
    <!--Icon library-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!--Local Files-->
    <script src = "../static/js/create/textbox.js"></script>
    <script src = "../static/js/create/drawing.js"></script>
    <script src = "../static/js/create/add_image.js"></script>
    <script src = "../static/js/create.js"></script>
    <link rel = "stylesheet" href = "../static/css/create.css">
{% endblock %}

{% block content %}
<input id = "fileInput" type = "file" accept = "image/*">
<input id = "addImgInput" type = "file" accept = "image/*">
<div id = "template-list" class = "modal fade" tabindex = "-1" role = "dialog">
    <div class = "modal-dialog" role = "document">
        <div class = "modal-content">
            <div class = "modal-header">
                <h3 class = "modal-title">Select a Template</h3>
                <button type="button" class="close btn btn-secondary" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Close</span>
                </button>
            </div>
            <div class = "modal-body">
                <table>
                    <colgroup>
                        <col style = "width: 30%;">
                        <col style = "width: 70%">
                    </colgroup>
                    <tbody>
                        {% for template in templates %}
                        <tr>
                            <td type="button" class="btn btn-light modal-button" data-dismiss="modal" aria-label="Close">
                                <img src = "{{ template }}" class = "template-card">
                            </td>
                            <td>{{ template.split("/")[-1].replace("%20", " ")[:-4] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class = "modal-footer">
                <button id = "fileInputBtn2" class = "btn btn-primary" data-dismiss="modal">
                    Or Upload your own!
                </button>
                <button type="button" class="close btn btn-secondary" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Close</span>
                </button>
            </div>
        </div>
    </div>
</div>
<div id = "add-image" class = "modal fade" tabindex = "-1" role = "dialog">
    <div class = "modal-dialog" role = "document">
        <div class = "modal-content">
            <div class = "modal-header">
                <h3 class = "modal-title">Insert Additional Image</h3>
                <button type="button" class="close btn btn-secondary" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Close</span>
                </button>
            </div>
            <div class = "modal-body">
                <div style = "display: flex; justify-content: space-evenly;">
                    <div style = "display: inline-flex;">
                        <input type = "radio" class = "btn-check" name = "placement" id = "inside">
                        <label class = "btn" for = "inside">
                            Inside
                            <br>
                            <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
                                <g>
                                    <title>Layer 1</title>
                                    <rect fill="#fff" stroke="#000" x="296" y="200" width="201" height="201" id="svg_3" stroke-width="2"/>
                                    <rect fill="#fff" stroke="#000" x="337" y="252" width="64" height="64" id="svg_4" stroke-dasharray="5,5"/>
                                    <rect fill="#fff" stroke="#000" stroke-dasharray="5,5" x="835" y="371" width="0" height="2" id="svg_5"/>
                                    <rect stroke-width="2" id="svg_1" height="90" width="90" y="5" x="5" stroke="#000000" fill="#BBBBBB"/>
                                    <path id="svg_2" d="m21,23.3335l31,0l0,31l-31,0l0,-31z" opacity="undefined" stroke-dasharray="2,2" stroke="#000000" fill="#ffffff"/>
                                </g>   
                            </svg>
                        </label>   
                    </div>
                    <div style = "display: inline-flex;">
                        <input type = "radio" class = "btn-check" name = "placement" id = "below">
                        <label class = "btn" for = "below">
                            Below
                            <br>
                            <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
                                <g>
                                    <title>Layer 1</title>
                                    <rect fill="#fff" stroke="#000" x="296" y="200" width="201" height="201" id="svg_3" stroke-width="2"/>
                                    <rect fill="#fff" stroke="#000" x="337" y="252" width="64" height="64" id="svg_4" stroke-dasharray="5,5"/>
                                    <rect fill="#fff" stroke="#000" stroke-dasharray="5,5" x="835" y="371" width="0" height="2" id="svg_5"/>
                                    <rect id="svg_6" height="44" width="90" y="49" x="5" stroke-dasharray="2,2" stroke="#000000" fill="#ffffff"/>
                                    <rect id="svg_7" height="44" width="90" y="5" x="5" stroke="#000000" fill="#bababa"/>
                                </g>   
                            </svg>
                        </label>
                    </div>
                </div>
                <div style = "margin-top: 1rem;">
                    <button id = "addImgBtn" class = "btn btn-primary" style = "margin: auto; width: 50%; display: block;">
                        Upload an Image
                    </button>
                </div>
            </div>
            <div class = "modal-footer">
                <canvas id = "added-image-preview" style = "display: block; margin: auto; border: solid black 1px;"></canvas>
            </div>
        </div>
    </div>
</div>
<div id = "left-content">
    <div id = "image-tool-bar">
        <span>
            <button class = "btn btn-dark image-tool">Adjust Spacing</button>
        </span>
        <span>
            <button 
                class = "btn btn-dark image-tool"
                data-toggle = "modal"
                data-target = "#add-image"
                id = "image-modal-button">Add Image</button>
        </span>
        <span>
            <button class = "btn btn-dark image-tool">Draw</button>
        </span>
        <!-- <span>
            <button class = "btn btn-dark image-tool">Filters</button>
        </span> -->
    </div>
    <div id = "image-tools">
        <div id = "drawing-tools">
            <div>
                <label for = "color">Color</label>
                <input type = "color" id = "color" value = "#000000" class = "form-control">
            </div>
            <div>
                <label for = "thickness">Brush Size</label>
                <input type = "number" id = "thickness" value = "5" min = "1" max = "100" class = "form-control">
            </div>
            <div>
                <button class = "btn btn-danger" id = "erase">Erase</button>
            </div>
        </div>
        <div id = "spacing-tools">
            <div>
                <select id = "space-arrangement" class = "form-control">
                    <option value = "1.0">Top</option>
                    <option value = "0.5">Top and Bottom</option>
                    <option value = "0">Bottom</option>
                </select>
            </div>
            <div>
                <select id = "spacer" class = "form-control">
                    <option value = ".0">0% </option>
                    <option value = ".1">10%</option>
                    <option value = ".2">20%</option>
                    <option value = ".3">30%</option>
                    <option value = ".4">40%</option>
                    <option value = ".5">50%</option>
                    <option value = ".6">60%</option>
                    <option value = ".7">70%</option>
                    <option value = ".8">80%</option>
                    <option value = ".9">90%</option>
                </select>
            </div>
        </div>
    </div>
    <div id = "meme">
        <div style = "margin: auto; width: fit-content; margin-bottom: 1rem;">
            <button id = "fileInputBtn" class = "btn btn-primary">
                Upload an Image
            </button>
            <button 
                class = "btn btn-primary" 
                data-toggle = "modal" 
                data-target = "#template-list"
                id = "template-modal-button">
                Or use a template!
            </button>
        </div>
        <canvas id = "meme-img" height = "0"></canvas>
        <canvas id = "drawing" height = "0"></canvas>
    </div>
</div>
<div id = "right-content">
    <div id = "text-tool-bar">
    </div>
    <div>
        <button id = "new-box-btn" class = "btn btn-secondary">Add Text Area</button>
    </div>
    <div>
        <textarea placeholder = "Give your post a title!" id = "post-title" class = "form-control"></textarea>
    </div>
    <div>
        <button id = "post-btn" class = "btn btn-primary">Post</button>
        <button id = "cancel-btn" class = "btn btn-danger">Cancel</button>
    </div>
</div>
</div>
{% endblock %}